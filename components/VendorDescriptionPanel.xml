<?xml version = "1.0" encoding = "utf-8" ?>

<!--********** Copyright 2016 Roku Corp.  All Rights Reserved. **********-->

<component name = "VendorDescriptionPanel" extends = "Panel" >

  <interface >
    <field id = "description" type = "string" onChange = "showdescription" /> 
  </interface>

  <script type = "text/brightscript" >

    <![CDATA[

    sub init()
      m.top.panelSize = "medium"
      m.top.focusable = true
      m.top.hasNextPanel = false

      m.requiredPurposesLabel = m.top.findNode("requiredPurposesLabel")
      m.requiredPurposesHeaderLabel = m.top.findNode("requiredPurposesHeaderLabel")
      m.legIntPurposesLabel = m.top.findNode("legIntPurposesLabel")
      m.legIntPurposesHeaderLabel = m.top.findNode("legIntPurposesHeaderLabel")
      
    end sub

    sub showdescription()
      indexOfCaret = Instr(1, m.top.description, "^")
      requiredPurposes = Mid(m.top.description, 1, indexOfCaret - 1)
      legIntPurposes = Mid(m.top.description, indexOfCaret + 1, Len(m.top.description))
      if Len(requiredPurposes) = 0
        m.requiredPurposesHeaderLabel.text = ""
        m.requiredPurposesLabel.text = ""
      else 
        m.requiredPurposesHeaderLabel.text = "Requiring consent purposes : "
        m.requiredPurposesLabel.text = requiredPurposes
      end if
      if Len(legIntPurposes) = 0
        m.legIntPurposesHeaderLabel.text = ""
        m.legIntPurposesLabel.text = ""
      else 
        m.legIntPurposesHeaderLabel.text = "Legitimate Interest purposes : "
        m.legIntPurposesLabel.text = legIntPurposes
      end if
    end sub

    ]]>

  </script>

  <children >

  <Rectangle 
    id = "infoRectangle" 
    translation = "[ 0, 40 ]" 
    height = "500" 
    width = "520" 
    color = "0x101010C0" >
    <Label 
      id = "requiredPurposesHeaderLabel" 
      translation = "[ 15, 15 ]" 
      height = "50" 
      width = "490" 
      wrap = "true" 
      font = "font:MediumBoldSystemFont" />
    <Label 
      id = "requiredPurposesLabel" 
      translation = "[ 15, 45 ]" 
      height = "200" 
      width = "490" 
      wrap = "true" />
    <Label 
      id = "legIntPurposesHeaderLabel" 
      translation = "[ 15, 250 ]" 
      height = "50" 
      width = "490" 
      wrap = "true" 
      font = "font:MediumBoldSystemFont" />
    <Label 
      id = "legIntPurposesLabel" 
      translation = "[ 15, 300 ]" 
      height = "200" 
      width = "490" 
      wrap = "true" />
    </Rectangle>

  </children>

</component>
